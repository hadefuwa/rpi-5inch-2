<section id="screen-home" class="screen active">
  <div class="grid">
    <button type="button" class="card fancy theme-cyan" data-target="screen-touch">
      <div class="border-animation"></div>
      <div class="icon"></div>
      <span class="label">Touch Demo</span>
    </button>
    <button type="button" class="card fancy theme-purple" data-target="screen-info">
      <div class="border-animation"></div>
      <div class="icon"></div>
      <span class="label">System Info</span>
    </button>
    <button type="button" class="card fancy theme-gold" data-target="screen-games">
      <div class="border-animation"></div>
      <div class="icon"></div>
      <span class="label">Games Hub</span>
    </button>
    <button type="button" class="card fancy theme-white" data-target="screen-scroll">
      <div class="border-animation"></div>
      <div class="icon"></div>
      <span class="label">Scroll Test</span>
    </button>
    <button type="button" class="card fancy theme-lime" data-target="screen-visuals">
      <div class="border-animation"></div>
      <div class="icon"></div>
      <span class="label">Visuals</span>
    </button>
    <button type="button" class="card fancy theme-orange" data-target="screen-stl">
      <div class="border-animation"></div>
      <div class="icon"></div>
      <span class="label">3D Model</span>
    </button>
    <button type="button" class="card fancy theme-blue" data-target="screen-settings">
      <div class="border-animation"></div>
      <div class="icon"></div>
      <span class="label">Settings</span>
    </button>
    <button type="button" class="card fancy theme-silver" data-target="screen-about">
      <div class="border-animation"></div>
      <div class="icon"></div>
      <span class="label">About</span>
    </button>
  </div>
</section>

<style>
  /* Home screen specific styles - scoped to #screen-home */
  #screen-home {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px 20px;
    background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
    height: 100%;
    width: 100%;
  }
  
  #screen-home .grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    max-width: 800px;
    width: 100%;
  }
  
  #screen-home .card {
    background: rgba(255, 255, 255, 0.1);
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 15px;
    padding: 30px 20px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    min-height: 150px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 2;
  }
  
  #screen-home .card:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.4);
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  }
  
  #screen-home .card .label {
    font-size: 18px;
    font-weight: 600;
    margin-top: 15px;
    z-index: 2;
    position: relative;
  }
  
  #screen-home .card .icon {
    width: 50px;
    height: 50px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    margin-bottom: 15px;
    z-index: 2;
    position: relative;
  }
  
  #screen-home .card .border-animation {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 15px;
    background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    animation: borderFlow 3s linear infinite;
    pointer-events: none;
    z-index: 1;
  }
  
  @keyframes borderFlow {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }
  
  /* Theme variations */
  #screen-home .theme-cyan { border-color: #00bcd4; }
  #screen-home .theme-purple { border-color: #9c27b0; }
  #screen-home .theme-gold { border-color: #ff9800; }
  #screen-home .theme-white { border-color: #ffffff; }
  #screen-home .theme-lime { border-color: #cddc39; }
  #screen-home .theme-orange { border-color: #ff5722; }
  #screen-home .theme-blue { border-color: #2196f3; }
  #screen-home .theme-silver { border-color: #9e9e9e; }
  
  /* Responsive design */
  @media (max-width: 768px) {
    #screen-home .grid {
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
    }
    
    #screen-home .card {
      padding: 20px 15px;
      min-height: 120px;
    }
    
    #screen-home .card .label {
      font-size: 16px;
    }
    
    #screen-home .card .icon {
      width: 40px;
      height: 40px;
    }
  }
</style>

<script>
  (function() {
    'use strict';
    
    // Private variables for this screen
    var cardElements = [];
    var eventListeners = [];
    
    function initHome() {
      console.log('Home screen initialized');
      
      // Get all card elements
      cardElements = document.querySelectorAll('#screen-home .card');
      
      // Setup event listeners for each card
      setupCardNavigation();
    }
    
    function setupCardNavigation() {
      cardElements.forEach(function(card) {
        var target = card.getAttribute('data-target');
        if (target) {
          var listener = function(e) {
            e.preventDefault();
            e.stopPropagation();
            console.log('Card clicked:', target);
            navigateToScreen(target);
          };
          
          card.addEventListener('click', listener);
          eventListeners.push({ element: card, listener: listener, target: target });
          
          console.log('Added navigation listener for:', target);
        }
      });
    }
    
    function navigateToScreen(target) {
      console.log('Navigating to:', target);
      
      // Use the showcase framework if available
      if (window.showcaseFramework && window.showcaseFramework.navigateTo) {
        var appId = target.replace('screen-', '');
        window.showcaseFramework.navigateTo(appId);
      } else {
        // Fallback navigation
        console.warn('Showcase framework not available, using fallback navigation');
        var appId = target.replace('screen-', '');
        if (window.location.pathname.includes('/public/')) {
          window.location.href = `./src/screens/${appId}.html`;
        } else {
          window.location.href = `./src/screens/${appId}.html`;
        }
      }
    }
    
    function cleanupEventListeners() {
      eventListeners.forEach(function(item) {
        item.element.removeEventListener('click', item.listener);
      });
      eventListeners = [];
      console.log('Home screen event listeners cleaned up');
    }
    
    // Lifecycle management for home screen
    window.appLifecycle = {
      activate: function() {
        console.log('Home screen activated');
        initHome();
      },
      
      deactivate: function() {
        console.log('Home screen deactivated');
        // Clean up when screen is deactivated
        cleanupEventListeners();
      },
      
      cleanup: function() {
        console.log('Home screen cleanup');
        // Ensure all resources are cleaned up
        cleanupEventListeners();
        cardElements = [];
      }
    };
    
    // Initialize home screen
    initHome();
  })();
</script>
